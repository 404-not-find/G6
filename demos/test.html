<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <script src="./assets/jquery-3.2.1.min.js"></script>
  <script src="../build/g6.js"></script>
  <script src="../build/plugins.js"></script>
  <title>测试</title>
</head>

<body>
  <div id="mountNode"></div>
  <div id="minimap"></div>

  <style>
    /* 此处书写样式代码，支持 less scss */
    /* @import 'antd/dist/antd.css'; */
    .card-container {
      width: 170px;
      height: 74px;
      border: 1px solid #DBDBDB;
      border-radius: 4px;
      position: relative;
    }
    .card-container .main-text{
      text-align: center;
      margin: 12px 14px;
      padding-bottom: 8px;
      margin-bottom: 0px;
      font-size: 16px;
      border-bottom: 1px solid #DBDBDB;
    }
    .card-container p{
      font-size: 12px;
      margin: 8px;
    }
    .card-container .value-text{
      margin-left: 12px;
      text-align: left;
    }
    .card-container .percent-text{
      margin-right: 12px;
      float: right;
      color: red
    }
  </style>
  <script>
const MaxSpanningForestPlugin = G6.Plugins['template.maxSpanningForest'];
        const maxSpanningForest = new MaxSpanningForestPlugin();

G6.registerNode('databaseNode', {
            draw(item) {
                console.log('item:', item);
                const group = item.getGraphicGroup();

                const html = G6.Util.createDOM('<div id="parent">test</div>');
               
                return group.addShape('dom', {
                    attrs: {
                        x: 0,
                        y: 0,
                        width: 100,
                        height: 30,
                        html
                    }
                });
            }
        });


const data = {
    nodes: [
        {
            id: 0,
            weight: 42.194703980779714
        },
        {
            id: 1,
            weight: 72.86640536738712
        },
        {
            id: 2,
            weight: 82.29983433131834
        },
        {
            id: 3,
            weight: 23.204885400175424
        },
        {
            id: 4,
            weight: 100.84964997048472
        },
        {
            id: 5,
            weight: 72.90971413062293
        },
        {
            id: 6,
            weight: 15.029159176990348
        },
        {
            id: 7,
            weight: 24.38308784826313
        },
        {
            id: 8,
            weight: 78.00164088714241
        },
        {
            id: 9,
            weight: 53.580641600279954
        },
    ],
    edges: [
        {
            id: '1-6',
            source: 1,
            target: 6,
            weight: 89.69805016254719,
        },
        {
            id: '5-3',
            source: 5,
            target: 3,
            weight: 86.31397440928264,
        },
        {
            id: '0-5',
            source: 0,
            target: 5,
            weight: 76.94877138495532,
        },
        {
            id: '5-9',
            source: 5,
            target: 9,
            weight: 63.754902669930644,
        },
        {
            id: '2-7',
            source: 2,
            target: 7,
            weight: 4.449707271000913,
        },
        {
            id: '3-4',
            source: 3,
            target: 4,
            weight: 36.97483959651564,
        },
        {
            id: '9-3',
            source: 9,
            target: 3,
            weight: 50.354719513581635,
        },
        {
            id: '6-4',
            source: 6,
            target: 4,
            weight: 10.02660118138856,
        },
        {
            id: '8-3',
            source: 8,
            target: 3,
            weight: 13,
        },
        {
            id: '8-4',
            source: 8,
            target: 4,
            weight: 13,
        },
        {
            id: '2-1',
            source: 2,
            target: 1,
            weight: 13,
        },
        {
            id: '4-5',
            source: 4,
            target: 5,
            weight: 60,
        },
        {
            id: '4-8',
            source: 4,
            target: 8,
            weight: 63,
        },
        {
            id: '8-5',
            source: 8,
            target: 5,
            weight: 13,
        },
        {
            id: '9-2',
            source: 9,
            target: 2,
            weight: 13,
        },
        {
            id: '1-8',
            source: 1,
            target: 8,
            weight: 19.02660118138856,
        },
        {
            id: '4-2',
            source: 4,
            target: 2,
            weight: 50.02660118138856,
        },
    ],
};

const graph = new G6.Graph({
    id: 'mountNode',
    renderer: 'svg',
    width: 1000,
    height: window.innerHeight,
    fitView: 'cc',
    fitViewPadding: true,
    plugins: [maxSpanningForest]
});

// 注释掉node的shape设置后，就可以显示了
graph.node({
  shape: 'databaseNode'
});


graph.read(data);
  </script>
</body>
</html>

